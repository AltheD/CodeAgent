{
  "bad_code_analysis": {
    "file": "bad_code.py",
    "total_issues": 88,
    "issues_by_type": {
      "unused_import": 6,
      "hardcoded_secret": 2,
      "unsafe_eval": 1,
      "missing_type_hint": 47,
      "bad_exception_handling": 1,
      "global_variable": 1,
      "magic_number": 6,
      "unsafe_file_operation": 1,
      "missing_docstring": 21,
      "bad_naming": 1,
      "parse_error": 1
    },
    "issues_by_severity": {
      "error": 4,
      "warning": 10,
      "info": 74
    },
    "issues": [
      {
        "type": "unused_import",
        "severity": "warning",
        "message": "未使用的导入: os",
        "line": 0,
        "file": ""
      },
      {
        "type": "unused_import",
        "severity": "warning",
        "message": "未使用的导入: sys",
        "line": 0,
        "file": ""
      },
      {
        "type": "unused_import",
        "severity": "warning",
        "message": "未使用的导入: json",
        "line": 0,
        "file": ""
      },
      {
        "type": "unused_import",
        "severity": "warning",
        "message": "未使用的导入: hashlib",
        "line": 0,
        "file": ""
      },
      {
        "type": "unused_import",
        "severity": "warning",
        "message": "未使用的导入: subprocess",
        "line": 0,
        "file": ""
      },
      {
        "type": "unused_import",
        "severity": "warning",
        "message": "未使用的导入: unused_module",
        "line": 0,
        "file": ""
      },
      {
        "type": "hardcoded_secret",
        "severity": "error",
        "message": "发现硬编码的秘密信息",
        "line": 17,
        "file": ""
      },
      {
        "type": "hardcoded_secret",
        "severity": "error",
        "message": "发现硬编码的秘密信息",
        "line": 18,
        "file": ""
      },
      {
        "type": "unsafe_eval",
        "severity": "error",
        "message": "使用了不安全的eval函数",
        "line": 22,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 calculate_expression 的参数 expr 缺少类型注解",
        "line": 21,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 calculate_expression 缺少返回类型注解",
        "line": 21,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 process_data 的参数 data 缺少类型注解",
        "line": 25,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 process_data 缺少返回类型注解",
        "line": 25,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 very_long_function 的参数 param1 缺少类型注解",
        "line": 33,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 very_long_function 的参数 param2 缺少类型注解",
        "line": 33,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 very_long_function 的参数 param3 缺少类型注解",
        "line": 33,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 very_long_function 的参数 param4 缺少类型注解",
        "line": 33,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 very_long_function 的参数 param5 缺少类型注解",
        "line": 33,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 very_long_function 的参数 param6 缺少类型注解",
        "line": 33,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 very_long_function 的参数 param7 缺少类型注解",
        "line": 33,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 very_long_function 的参数 param8 缺少类型注解",
        "line": 33,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 very_long_function 缺少返回类型注解",
        "line": 33,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 calculate_sum1 的参数 numbers 缺少类型注解",
        "line": 49,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 calculate_sum1 缺少返回类型注解",
        "line": 49,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 calculate_sum2 的参数 values 缺少类型注解",
        "line": 55,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 calculate_sum2 缺少返回类型注解",
        "line": 55,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 read_file 的参数 filename 缺少类型注解",
        "line": 62,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 read_file 缺少返回类型注解",
        "line": 62,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 modify_global 缺少返回类型注解",
        "line": 72,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 check_age 的参数 age 缺少类型注解",
        "line": 78,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 check_age 缺少返回类型注解",
        "line": 78,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 create_temp_file 缺少返回类型注解",
        "line": 87,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 BadlyNamedFunction 缺少返回类型注解",
        "line": 108,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 divide_numbers 的参数 a 缺少类型注解",
        "line": 115,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 divide_numbers 的参数 b 缺少类型注解",
        "line": 115,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 divide_numbers 缺少返回类型注解",
        "line": 115,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 complex_logic 的参数 data 缺少类型注解",
        "line": 119,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 complex_logic 缺少返回类型注解",
        "line": 119,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 generate_token 缺少返回类型注解",
        "line": 134,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 process_large_data 缺少返回类型注解",
        "line": 138,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 process_user_input 的参数 user_input 缺少类型注解",
        "line": 146,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 process_user_input 缺少返回类型注解",
        "line": 146,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 badly_formatted_function 的参数 param1 缺少类型注解",
        "line": 151,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 badly_formatted_function 的参数 param2 缺少类型注解",
        "line": 151,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 badly_formatted_function 的参数 param3 缺少类型注解",
        "line": 151,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 badly_formatted_function 缺少返回类型注解",
        "line": 151,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 unused_function 缺少返回类型注解",
        "line": 158,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 main 缺少返回类型注解",
        "line": 161,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 __init__ 的参数 self 缺少类型注解",
        "line": 95,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 __init__ 缺少返回类型注解",
        "line": 95,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 add_user 的参数 self 缺少类型注解",
        "line": 98,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 add_user 的参数 user 缺少类型注解",
        "line": 98,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 add_user 缺少返回类型注解",
        "line": 98,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 get_user 的参数 self 缺少类型注解",
        "line": 101,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 get_user 的参数 user_id 缺少类型注解",
        "line": 101,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 get_user 缺少返回类型注解",
        "line": 101,
        "file": ""
      },
      {
        "type": "bad_exception_handling",
        "severity": "warning",
        "message": "使用了裸露的except语句，应该指定具体的异常类型",
        "line": 66,
        "file": ""
      },
      {
        "type": "global_variable",
        "severity": "warning",
        "message": "使用了全局变量，建议避免",
        "line": 73,
        "file": ""
      },
      {
        "type": "magic_number",
        "severity": "info",
        "message": "发现魔法数字，建议定义为常量",
        "line": 36,
        "file": ""
      },
      {
        "type": "magic_number",
        "severity": "info",
        "message": "发现魔法数字，建议定义为常量",
        "line": 79,
        "file": ""
      },
      {
        "type": "magic_number",
        "severity": "info",
        "message": "发现魔法数字，建议定义为常量",
        "line": 81,
        "file": ""
      },
      {
        "type": "magic_number",
        "severity": "info",
        "message": "发现魔法数字，建议定义为常量",
        "line": 126,
        "file": ""
      },
      {
        "type": "magic_number",
        "severity": "info",
        "message": "发现魔法数字，建议定义为常量",
        "line": 135,
        "file": ""
      },
      {
        "type": "magic_number",
        "severity": "info",
        "message": "发现魔法数字，建议定义为常量",
        "line": 150,
        "file": ""
      },
      {
        "type": "unsafe_file_operation",
        "severity": "warning",
        "message": "使用了硬编码的临时文件路径",
        "line": 88,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 calculate_expression 缺少文档字符串",
        "line": 21,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 process_data 缺少文档字符串",
        "line": 25,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 very_long_function 缺少文档字符串",
        "line": 33,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 calculate_sum1 缺少文档字符串",
        "line": 49,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 calculate_sum2 缺少文档字符串",
        "line": 55,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 read_file 缺少文档字符串",
        "line": 62,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 modify_global 缺少文档字符串",
        "line": 72,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 check_age 缺少文档字符串",
        "line": 78,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 create_temp_file 缺少文档字符串",
        "line": 87,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "类 UserManager 缺少文档字符串",
        "line": 94,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 BadlyNamedFunction 缺少文档字符串",
        "line": 108,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 divide_numbers 缺少文档字符串",
        "line": 115,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 complex_logic 缺少文档字符串",
        "line": 119,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 generate_token 缺少文档字符串",
        "line": 134,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 process_large_data 缺少文档字符串",
        "line": 138,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 process_user_input 缺少文档字符串",
        "line": 146,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 badly_formatted_function 缺少文档字符串",
        "line": 151,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 unused_function 缺少文档字符串",
        "line": 158,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 main 缺少文档字符串",
        "line": 161,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 add_user 缺少文档字符串",
        "line": 98,
        "file": ""
      },
      {
        "type": "missing_docstring",
        "severity": "info",
        "message": "函数 get_user 缺少文档字符串",
        "line": 101,
        "file": ""
      },
      {
        "type": "bad_naming",
        "severity": "warning",
        "message": "函数名 BadlyNamedFunction 不符合命名规范",
        "line": 108,
        "file": ""
      },
      {
        "type": "parse_error",
        "severity": "error",
        "message": "文件解析失败: 'Div' object has no attribute 'lineno'",
        "line": 0,
        "file": "bad_code.py"
      }
    ]
  },
  "good_code_analysis": {
    "file": "good_code.py",
    "total_issues": 17,
    "issues_by_type": {
      "unused_import": 5,
      "unsafe_eval": 1,
      "missing_type_hint": 6,
      "magic_number": 4,
      "parse_error": 1
    },
    "issues_by_severity": {
      "error": 2,
      "warning": 5,
      "info": 10
    },
    "issues": [
      {
        "type": "unused_import",
        "severity": "warning",
        "message": "未使用的导入: os",
        "line": 0,
        "file": ""
      },
      {
        "type": "unused_import",
        "severity": "warning",
        "message": "未使用的导入: sys",
        "line": 0,
        "file": ""
      },
      {
        "type": "unused_import",
        "severity": "warning",
        "message": "未使用的导入: json",
        "line": 0,
        "file": ""
      },
      {
        "type": "unused_import",
        "severity": "warning",
        "message": "未使用的导入: hashlib",
        "line": 0,
        "file": ""
      },
      {
        "type": "unused_import",
        "severity": "warning",
        "message": "未使用的导入: subprocess",
        "line": 0,
        "file": ""
      },
      {
        "type": "unsafe_eval",
        "severity": "error",
        "message": "使用了不安全的eval函数",
        "line": 104,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 main 缺少返回类型注解",
        "line": 257,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 __init__ 的参数 self 缺少类型注解",
        "line": 21,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 __init__ 缺少返回类型注解",
        "line": 21,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 add_user 的参数 self 缺少类型注解",
        "line": 25,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 get_user 的参数 self 缺少类型注解",
        "line": 40,
        "file": ""
      },
      {
        "type": "missing_type_hint",
        "severity": "info",
        "message": "函数 _validate_user 的参数 self 缺少类型注解",
        "line": 54,
        "file": ""
      },
      {
        "type": "magic_number",
        "severity": "info",
        "message": "发现魔法数字，建议定义为常量",
        "line": 141,
        "file": ""
      },
      {
        "type": "magic_number",
        "severity": "info",
        "message": "发现魔法数字，建议定义为常量",
        "line": 142,
        "file": ""
      },
      {
        "type": "magic_number",
        "severity": "info",
        "message": "发现魔法数字，建议定义为常量",
        "line": 202,
        "file": ""
      },
      {
        "type": "magic_number",
        "severity": "info",
        "message": "发现魔法数字，建议定义为常量",
        "line": 227,
        "file": ""
      },
      {
        "type": "parse_error",
        "severity": "error",
        "message": "文件解析失败: 'Div' object has no attribute 'lineno'",
        "line": 0,
        "file": "good_code.py"
      }
    ]
  },
  "comparison": {
    "total_improvement": 71,
    "improvement_rate": 80.68181818181817
  }
}