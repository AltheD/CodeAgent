{
  "task_67003aeac8ed": {
    "task_id": "task_67003aeac8ed",
    "status": "running",
    "created_at": "2025-09-29T18:42:33.575912",
    "started_at": "2025-09-29T18:42:33.575912",
    "result": null,
    "error": null
  },
  "task_fe017519331d": {
    "task_id": "task_fe017519331d",
    "status": "running",
    "created_at": "2025-09-29T18:51:14.520733",
    "started_at": "2025-09-29T18:51:14.520733",
    "result": null,
    "error": null
  },
  "task_6b17cabcc82d": {
    "task_id": "task_6b17cabcc82d",
    "status": "completed",
    "created_at": "2025-09-29T18:51:40.777539",
    "started_at": "2025-09-29T18:51:40.777539",
    "result": {
      "success": true,
      "task_id": "task_6b17cabcc82d",
      "detection_results": {
        "project_path": "temp_extract\\project_20250929_185140",
        "total_files": 4,
        "total_issues": 27,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    user_input = \"print('Hello World')\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    result = eval(user_input)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "def missing_docstring_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 10,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 11,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 11,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    user_input = \"print('Hello World')\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    result = eval(user_input)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "def missing_docstring_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "mypy",
            "severity": "error",
            "message": "Cannot find implementation or library stub for module named \"unused_module\"  [import-not-found]",
            "file": "test_python_with_issues.py",
            "line": 26,
            "column": 0,
            "rule": "mypy",
            "language": "python",
            "code_snippet": [
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def unused_import_test():",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    import unused_module",
                "is_issue_line": true
              },
              {
                "line_number": 27,
                "content": "    return \"test\"",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "def main():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "null_pointer_dereference",
            "severity": "error",
            "message": "潜在的空指针解引用",
            "line": 6,
            "file": "test_java_with_issues.java",
            "language": "java",
            "code_snippet": [
              {
                "line_number": 3,
                "content": "    public static void main(String[] args) {",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "        // 空指针解引用风险",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "        String str = null;",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "        if (str == null) {",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "            System.out.println(\"String is null\");",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "        }",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "        ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_java_with_issues.java",
            "enhanced": true
          },
          {
            "type": "buffer_overflow",
            "severity": "error",
            "message": "缓冲区溢出风险",
            "line": 8,
            "file": "test_c_with_issues.c",
            "language": "c",
            "code_snippet": [
              {
                "line_number": 5,
                "content": "int main() {",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "    // 缓冲区溢出风险",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "    char buffer[10];",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "    strcpy(buffer, \"This is a very long string that will cause buffer overflow\");",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    // 内存泄漏",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    char* ptr = malloc(100);",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_c_with_issues.c",
            "enhanced": true
          },
          {
            "type": "xss_vulnerability",
            "severity": "error",
            "message": "XSS漏洞风险",
            "line": 5,
            "file": "test_js_with_issues.js",
            "language": "javascript",
            "code_snippet": [
              {
                "line_number": 2,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "// XSS漏洞风险",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "function displayUserInput(userInput) {",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "    document.getElementById('output').innerHTML = userInput;",
                "is_issue_line": true
              },
              {
                "line_number": 6,
                "content": "    document.write(userInput);",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "}",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_js_with_issues.js",
            "enhanced": true
          },
          {
            "type": "xss_vulnerability",
            "severity": "error",
            "message": "XSS漏洞风险",
            "line": 6,
            "file": "test_js_with_issues.js",
            "language": "javascript",
            "code_snippet": [
              {
                "line_number": 3,
                "content": "// XSS漏洞风险",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "function displayUserInput(userInput) {",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "    document.getElementById('output').innerHTML = userInput;",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "    document.write(userInput);",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "}",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "// 未使用的变量",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_js_with_issues.js",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: os",
            "line": 6,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "测试文件 - 包含各种缺陷",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: sys",
            "line": 7,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "import sys",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module",
            "line": 26,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def unused_import_test():",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    import unused_module",
                "is_issue_line": true
              },
              {
                "line_number": 27,
                "content": "    return \"test\"",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "def main():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "division_by_zero_risk",
            "severity": "warning",
            "message": "可能存在除零风险",
            "line": 1,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "#!/usr/bin/env python3",
                "is_issue_line": true
              },
              {
                "line_number": 2,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "测试文件 - 包含各种缺陷",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 16,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    user_input = \"print('Hello World')\"",
                "is_issue_line": true
              },
              {
                "line_number": 17,
                "content": "    result = eval(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 30,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 27,
                "content": "    return \"test\"",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "def main():",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    print(\"测试文件运行中...\")",
                "is_issue_line": true
              },
              {
                "line_number": 31,
                "content": "    unsafe_function()",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "    missing_docstring_function()",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    unused_import_test()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 16,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    user_input = \"print('Hello World')\"",
                "is_issue_line": true
              },
              {
                "line_number": 17,
                "content": "    result = eval(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 30,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 27,
                "content": "    return \"test\"",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "def main():",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    print(\"测试文件运行中...\")",
                "is_issue_line": true
              },
              {
                "line_number": 31,
                "content": "    unsafe_function()",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "    missing_docstring_function()",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    unused_import_test()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 unsafe_function 缺少参数验证",
            "line": 13,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": true
              },
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    user_input = \"print('Hello World')\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 missing_docstring_function 缺少参数验证",
            "line": 20,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "    result = eval(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "def missing_docstring_function():",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return \"test\"",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 unused_import_test 缺少参数验证",
            "line": 24,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return \"test\"",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def unused_import_test():",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    import unused_module",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    return \"test\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 main 缺少参数验证",
            "line": 29,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 26,
                "content": "    import unused_module",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    return \"test\"",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "def main():",
                "is_issue_line": true
              },
              {
                "line_number": 30,
                "content": "    print(\"测试文件运行中...\")",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "    unsafe_function()",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "    missing_docstring_function()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 24,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return \"test\"",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def unused_import_test():",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    import unused_module",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    return \"test\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "bandit",
            "severity": "LOW",
            "message": "Possible hardcoded password: 'admin123'",
            "file": "test_python_with_issues.py",
            "line": 11,
            "column": 0,
            "rule": "B105",
            "language": "python",
            "code_snippet": [
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {},
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "bandit",
            "severity": "MEDIUM",
            "message": "Use of possibly insecure function - consider using safer ast.literal_eval.",
            "file": "test_python_with_issues.py",
            "line": 17,
            "column": 0,
            "rule": "B307",
            "language": "python",
            "code_snippet": [
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    user_input = \"print('Hello World')\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    result = eval(user_input)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "def missing_docstring_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {},
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "bandit",
          "custom_analyzer",
          "mypy"
        ],
        "analysis_time": 7.0831789999999994,
        "summary": {
          "error_count": 12,
          "warning_count": 8,
          "info_count": 5
        },
        "languages_detected": [
          "python",
          "javascript",
          "java",
          "c"
        ]
      },
      "report": {
        "summary": {
          "error_count": 12,
          "warning_count": 8,
          "info_count": 5
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "mypy": 1,
          "null_pointer_dereference": 1,
          "buffer_overflow": 1,
          "xss_vulnerability": 2,
          "unused_import": 3,
          "division_by_zero_risk": 1,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 4,
          "missing_docstring": 1,
          "bandit": 2
        },
        "issues_by_severity": {
          "error": 12,
          "warning": 8,
          "info": 5
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    user_input = \"print('Hello World')\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    result = eval(user_input)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "def missing_docstring_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 10,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 11,
            "file": "test_python_with_issues.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "# 硬编码密钥",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def unsafe_function():",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"不安全的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "temp_extract\\project_20250929_185140\\test_python_with_issues.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-09-29T18:51:47.912208"
    },
    "error": null,
    "completed_at": "2025-09-29T18:51:47.912208"
  },
  "4736c5b0-dbdf-45de-843a-a0b15037df79": {
    "task_id": "4736c5b0-dbdf-45de-843a-a0b15037df79",
    "status": "completed",
    "created_at": "2025-10-10T10:27:48.952843",
    "started_at": "2025-10-10T10:27:48.952843",
    "result": {
      "success": true,
      "task_id": "4736c5b0-dbdf-45de-843a-a0b15037df79",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 0,
        "issues": [],
        "detection_tools": [],
        "analysis_time": 0.010994,
        "summary": {
          "error_count": 0,
          "warning_count": 0,
          "info_count": 0
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 0,
          "warning_count": 0,
          "info_count": 0
        },
        "issues_by_type": {},
        "issues_by_severity": {
          "error": 0,
          "warning": 0,
          "info": 0
        },
        "recommendations": [],
        "priority_issues": []
      },
      "timestamp": "2025-10-10T10:27:48.969152"
    },
    "error": null,
    "completed_at": "2025-10-10T10:27:48.969152"
  },
  "715ad769-05cb-4106-90ee-19bfb1b51f55": {
    "task_id": "715ad769-05cb-4106-90ee-19bfb1b51f55",
    "status": "completed",
    "created_at": "2025-10-10T10:28:30.716229",
    "started_at": "2025-10-10T10:28:30.716229",
    "result": {
      "success": true,
      "task_id": "715ad769-05cb-4106-90ee-19bfb1b51f55",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 0,
        "issues": [],
        "detection_tools": [],
        "analysis_time": 0.010118,
        "summary": {
          "error_count": 0,
          "warning_count": 0,
          "info_count": 0
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 0,
          "warning_count": 0,
          "info_count": 0
        },
        "issues_by_type": {},
        "issues_by_severity": {
          "error": 0,
          "warning": 0,
          "info": 0
        },
        "recommendations": [],
        "priority_issues": []
      },
      "timestamp": "2025-10-10T10:28:30.731344"
    },
    "error": null,
    "completed_at": "2025-10-10T10:28:30.731344"
  },
  "83d1a444-4e9f-44f4-a343-4c1a8ed09730": {
    "task_id": "83d1a444-4e9f-44f4-a343-4c1a8ed09730",
    "status": "completed",
    "created_at": "2025-10-10T10:29:08.285148",
    "started_at": "2025-10-10T10:29:08.285148",
    "result": {
      "success": true,
      "task_id": "83d1a444-4e9f-44f4-a343-4c1a8ed09730",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 0,
        "issues": [],
        "detection_tools": [],
        "analysis_time": 0.010993,
        "summary": {
          "error_count": 0,
          "warning_count": 0,
          "info_count": 0
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 0,
          "warning_count": 0,
          "info_count": 0
        },
        "issues_by_type": {},
        "issues_by_severity": {
          "error": 0,
          "warning": 0,
          "info": 0
        },
        "recommendations": [],
        "priority_issues": []
      },
      "timestamp": "2025-10-10T10:29:08.300141"
    },
    "error": null,
    "completed_at": "2025-10-10T10:29:08.300141"
  },
  "b8f3d935-02c1-4415-8ea1-db815d2b3327": {
    "task_id": "b8f3d935-02c1-4415-8ea1-db815d2b3327",
    "status": "completed",
    "created_at": "2025-10-10T10:33:42.644381",
    "started_at": "2025-10-10T10:33:42.644381",
    "result": {
      "success": true,
      "task_id": "b8f3d935-02c1-4415-8ea1-db815d2b3327",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 32,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: os",
            "line": 2,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": true
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: sys",
            "line": 3,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": true
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "division_by_zero_risk",
            "severity": "warning",
            "message": "可能存在除零风险",
            "line": 30,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    result = a / b  # 可能除零错误",
                "is_issue_line": true
              },
              {
                "line_number": 31,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 44,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    x = 1",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    y = 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 16,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 13,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 28,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 29,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    result = a / b  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 36,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    return query",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    x = 1",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    y = 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 36,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    return query",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 1000000",
            "line": 51,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": true
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.030143999999999997,
        "summary": {
          "error_count": 7,
          "warning_count": 10,
          "info_count": 15
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 10,
          "info_count": 15
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 2,
          "unhandled_exception": 3,
          "division_by_zero_risk": 1,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8,
          "missing_docstring": 6,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 10,
          "info": 15
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T10:33:42.681864"
    },
    "error": null,
    "completed_at": "2025-10-10T10:33:42.681864"
  },
  "c7756271-679a-4472-aa86-4bbb4e30d874": {
    "task_id": "c7756271-679a-4472-aa86-4bbb4e30d874",
    "status": "completed",
    "created_at": "2025-10-10T10:34:13.613761",
    "started_at": "2025-10-10T10:34:13.613761",
    "result": {
      "success": true,
      "task_id": "c7756271-679a-4472-aa86-4bbb4e30d874",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 32,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: os",
            "line": 2,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": true
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: sys",
            "line": 3,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": true
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "division_by_zero_risk",
            "severity": "warning",
            "message": "可能存在除零风险",
            "line": 30,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    result = a / b  # 可能除零错误",
                "is_issue_line": true
              },
              {
                "line_number": 31,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 44,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    x = 1",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    y = 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 16,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 13,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 28,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 29,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    result = a / b  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 36,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    return query",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    x = 1",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    y = 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 36,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    return query",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 1000000",
            "line": 51,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": true
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.020080999999999998,
        "summary": {
          "error_count": 7,
          "warning_count": 10,
          "info_count": 15
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 10,
          "info_count": 15
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 2,
          "unhandled_exception": 3,
          "division_by_zero_risk": 1,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8,
          "missing_docstring": 6,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 10,
          "info": 15
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T10:34:13.653075"
    },
    "error": null,
    "completed_at": "2025-10-10T10:34:13.653075"
  },
  "774d7644-f6e8-495b-aafe-cdcf4ac397d8": {
    "task_id": "774d7644-f6e8-495b-aafe-cdcf4ac397d8",
    "status": "completed",
    "created_at": "2025-10-10T10:34:27.490264",
    "started_at": "2025-10-10T10:34:27.490264",
    "result": {
      "success": true,
      "task_id": "774d7644-f6e8-495b-aafe-cdcf4ac397d8",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 32,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: os",
            "line": 2,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": true
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: sys",
            "line": 3,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": true
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "division_by_zero_risk",
            "severity": "warning",
            "message": "可能存在除零风险",
            "line": 30,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    result = a / b  # 可能除零错误",
                "is_issue_line": true
              },
              {
                "line_number": 31,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 44,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    x = 1",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    y = 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 16,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 13,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 28,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 29,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    result = a / b  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 36,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    return query",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    x = 1",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    y = 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 36,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    return query",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 1000000",
            "line": 51,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": true
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.021269000000000003,
        "summary": {
          "error_count": 7,
          "warning_count": 10,
          "info_count": 15
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 10,
          "info_count": 15
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 2,
          "unhandled_exception": 3,
          "division_by_zero_risk": 1,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8,
          "missing_docstring": 6,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 10,
          "info": 15
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T10:34:27.521462"
    },
    "error": null,
    "completed_at": "2025-10-10T10:34:27.521462"
  },
  "dc033599-e41f-4d0c-822e-09fbbab7f898": {
    "task_id": "dc033599-e41f-4d0c-822e-09fbbab7f898",
    "status": "completed",
    "created_at": "2025-10-10T10:34:40.903181",
    "started_at": "2025-10-10T10:34:40.903181",
    "result": {
      "success": true,
      "task_id": "dc033599-e41f-4d0c-822e-09fbbab7f898",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 32,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: os",
            "line": 2,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": true
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: sys",
            "line": 3,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": true
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "division_by_zero_risk",
            "severity": "warning",
            "message": "可能存在除零风险",
            "line": 30,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    result = a / b  # 可能除零错误",
                "is_issue_line": true
              },
              {
                "line_number": 31,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 44,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    x = 1",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    y = 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 16,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 13,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 28,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 29,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    result = a / b  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 36,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    return query",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    x = 1",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    y = 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    processed = data * 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 36,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 33,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 37,
                "content": "    global global_var",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "        content = f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    return query",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 1000000",
            "line": 51,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 48,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "def create_large_list():",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    for i in range(1000000):",
                "is_issue_line": true
              },
              {
                "line_number": 52,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.020996,
        "summary": {
          "error_count": 7,
          "warning_count": 10,
          "info_count": 15
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 10,
          "info_count": 15
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 2,
          "unhandled_exception": 3,
          "division_by_zero_risk": 1,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8,
          "missing_docstring": 6,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 10,
          "info": 15
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 6,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T10:34:40.937179"
    },
    "error": null,
    "completed_at": "2025-10-10T10:34:40.937179"
  },
  "954c7e55-a894-4131-b677-7b9a3eeedfc5": {
    "task_id": "954c7e55-a894-4131-b677-7b9a3eeedfc5",
    "status": "completed",
    "created_at": "2025-10-10T10:35:07.641563",
    "started_at": "2025-10-10T10:35:07.641563",
    "result": {
      "success": true,
      "task_id": "954c7e55-a894-4131-b677-7b9a3eeedfc5",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 33,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: os",
            "line": 2,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": true
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: sys",
            "line": 3,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": true
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "division_by_zero_risk",
            "severity": "warning",
            "message": "可能存在除零风险",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "    result = a / b  # 可能除零错误",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 38,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 35,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    global global_var",
                "is_issue_line": true
              },
              {
                "line_number": 39,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 38,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 35,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    global global_var",
                "is_issue_line": true
              },
              {
                "line_number": 39,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 45,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 42,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 46,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    x = 1",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    y = 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 23,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 20,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 24,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    processed = data * 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 29,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 26,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 30,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "    result = a / b  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    global global_var",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    return global_var",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 43,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 40,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 44,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "        content = f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    for i in range(1000000):",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "    return query",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    x = 1",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    y = 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 23,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 20,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 24,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    processed = data * 2",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    global global_var",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    return global_var",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 43,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 40,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 44,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "        content = f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    for i in range(1000000):",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "    return query",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 1000000",
            "line": 52,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 49,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def create_large_list():",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    for i in range(1000000):",
                "is_issue_line": true
              },
              {
                "line_number": 53,
                "content": "        big_list.append(f\"item_{i}\")",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019457000000000002,
        "summary": {
          "error_count": 7,
          "warning_count": 11,
          "info_count": 15
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 11,
          "info_count": 15
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 3,
          "unhandled_exception": 3,
          "division_by_zero_risk": 1,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8,
          "missing_docstring": 6,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 11,
          "info": 15
        },
        "recommendations": [
          "发现严重错误，建议优先修复",
          "警告数量较多，建议进行代码审查"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    result = eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T10:35:07.684011"
    },
    "error": null,
    "completed_at": "2025-10-10T10:35:07.684011"
  },
  "6cb35c25-84a5-4ec5-a58b-cb67ae1665ba": {
    "task_id": "6cb35c25-84a5-4ec5-a58b-cb67ae1665ba",
    "status": "completed",
    "created_at": "2025-10-10T12:36:00.044558",
    "started_at": "2025-10-10T12:36:00.044558",
    "result": {
      "success": true,
      "task_id": "6cb35c25-84a5-4ec5-a58b-cb67ae1665ba",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019999999999999997,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T12:36:00.082557"
    },
    "error": null,
    "completed_at": "2025-10-10T12:36:00.082557"
  },
  "7a036ca0-17e6-4794-b4c8-c2ae020dfbef": {
    "task_id": "7a036ca0-17e6-4794-b4c8-c2ae020dfbef",
    "status": "completed",
    "created_at": "2025-10-10T12:49:41.844519",
    "started_at": "2025-10-10T12:49:41.844519",
    "result": {
      "success": true,
      "task_id": "7a036ca0-17e6-4794-b4c8-c2ae020dfbef",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.021137,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T12:49:41.888998"
    },
    "error": null,
    "completed_at": "2025-10-10T12:49:41.888998"
  },
  "2fd82f91-4ef8-45df-a623-a35fe886c2dd": {
    "task_id": "2fd82f91-4ef8-45df-a623-a35fe886c2dd",
    "status": "completed",
    "created_at": "2025-10-10T12:50:02.169594",
    "started_at": "2025-10-10T12:50:02.169594",
    "result": {
      "success": true,
      "task_id": "2fd82f91-4ef8-45df-a623-a35fe886c2dd",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.021281,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T12:50:02.217734"
    },
    "error": null,
    "completed_at": "2025-10-10T12:50:02.217734"
  },
  "46b81cd8-ae88-424c-ba24-9d33ab2dde82": {
    "task_id": "46b81cd8-ae88-424c-ba24-9d33ab2dde82",
    "status": "completed",
    "created_at": "2025-10-10T12:53:21.301601",
    "started_at": "2025-10-10T12:53:21.301601",
    "result": {
      "success": true,
      "task_id": "46b81cd8-ae88-424c-ba24-9d33ab2dde82",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019012,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T12:53:21.347226"
    },
    "error": null,
    "completed_at": "2025-10-10T12:53:21.347226"
  },
  "393dfccc-d08d-437b-897e-ea20bbcc55cb": {
    "task_id": "393dfccc-d08d-437b-897e-ea20bbcc55cb",
    "status": "completed",
    "created_at": "2025-10-10T12:56:47.053588",
    "started_at": "2025-10-10T12:56:47.053588",
    "result": {
      "success": true,
      "task_id": "393dfccc-d08d-437b-897e-ea20bbcc55cb",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.018195,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T12:56:47.098664"
    },
    "error": null,
    "completed_at": "2025-10-10T12:56:47.098664"
  },
  "f1d616bd-6793-4187-99aa-58ab495ac659": {
    "task_id": "f1d616bd-6793-4187-99aa-58ab495ac659",
    "status": "completed",
    "created_at": "2025-10-10T13:01:10.042455",
    "started_at": "2025-10-10T13:01:10.042455",
    "result": {
      "success": true,
      "task_id": "f1d616bd-6793-4187-99aa-58ab495ac659",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019599,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T13:01:10.090611"
    },
    "error": null,
    "completed_at": "2025-10-10T13:01:10.090611"
  },
  "fefcba73-f45a-4034-8602-ab120188fc18": {
    "task_id": "fefcba73-f45a-4034-8602-ab120188fc18",
    "status": "completed",
    "created_at": "2025-10-10T13:01:38.192297",
    "started_at": "2025-10-10T13:01:38.192297",
    "result": {
      "success": true,
      "task_id": "fefcba73-f45a-4034-8602-ab120188fc18",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.018999,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T13:01:38.244205"
    },
    "error": null,
    "completed_at": "2025-10-10T13:01:38.244205"
  },
  "a20afbd8-639c-42bb-9bab-e524d8a9d111": {
    "task_id": "a20afbd8-639c-42bb-9bab-e524d8a9d111",
    "status": "completed",
    "created_at": "2025-10-10T15:51:22.317439",
    "started_at": "2025-10-10T15:51:22.317439",
    "result": {
      "success": true,
      "task_id": "a20afbd8-639c-42bb-9bab-e524d8a9d111",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.020068,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T15:51:22.370512"
    },
    "error": null,
    "completed_at": "2025-10-10T15:51:22.370512"
  },
  "8804c11f-c30b-499a-b88f-bc521a30f18b": {
    "task_id": "8804c11f-c30b-499a-b88f-bc521a30f18b",
    "status": "completed",
    "created_at": "2025-10-10T15:51:32.890763",
    "started_at": "2025-10-10T15:51:32.890763",
    "result": {
      "success": true,
      "task_id": "8804c11f-c30b-499a-b88f-bc521a30f18b",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019156,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T15:51:32.945169"
    },
    "error": null,
    "completed_at": "2025-10-10T15:51:32.945169"
  },
  "d07b6f5b-2df7-44fa-84ac-daf0c2dbc8f0": {
    "task_id": "d07b6f5b-2df7-44fa-84ac-daf0c2dbc8f0",
    "status": "completed",
    "created_at": "2025-10-10T15:51:47.044051",
    "started_at": "2025-10-10T15:51:47.044051",
    "result": {
      "success": true,
      "task_id": "d07b6f5b-2df7-44fa-84ac-daf0c2dbc8f0",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019281,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T15:51:47.099577"
    },
    "error": null,
    "completed_at": "2025-10-10T15:51:47.099577"
  },
  "cd961a4c-8593-42f4-a208-9cad2752f292": {
    "task_id": "cd961a4c-8593-42f4-a208-9cad2752f292",
    "status": "completed",
    "created_at": "2025-10-10T16:00:37.594468",
    "started_at": "2025-10-10T16:00:37.594468",
    "result": {
      "success": true,
      "task_id": "cd961a4c-8593-42f4-a208-9cad2752f292",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T16:00:37.655087"
    },
    "error": null,
    "completed_at": "2025-10-10T16:00:37.655087"
  },
  "126945af-c3ae-47fb-9d94-784afec11c03": {
    "task_id": "126945af-c3ae-47fb-9d94-784afec11c03",
    "status": "completed",
    "created_at": "2025-10-10T16:08:47.125079",
    "started_at": "2025-10-10T16:08:47.125079",
    "result": {
      "success": true,
      "task_id": "126945af-c3ae-47fb-9d94-784afec11c03",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.017002,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T16:08:47.190704"
    },
    "error": null,
    "completed_at": "2025-10-10T16:08:47.190704"
  },
  "fc8adcf2-2c91-4765-89ae-8d33caf7a18b": {
    "task_id": "fc8adcf2-2c91-4765-89ae-8d33caf7a18b",
    "status": "completed",
    "created_at": "2025-10-10T16:15:59.199463",
    "started_at": "2025-10-10T16:15:59.199463",
    "result": {
      "success": true,
      "task_id": "fc8adcf2-2c91-4765-89ae-8d33caf7a18b",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.015993,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T16:15:59.260915"
    },
    "error": null,
    "completed_at": "2025-10-10T16:15:59.260915"
  },
  "f35f3fb5-eb99-41fa-aee1-c3b72c2d6352": {
    "task_id": "f35f3fb5-eb99-41fa-aee1-c3b72c2d6352",
    "status": "completed",
    "created_at": "2025-10-10T16:17:29.123153",
    "started_at": "2025-10-10T16:17:29.123153",
    "result": {
      "success": true,
      "task_id": "f35f3fb5-eb99-41fa-aee1-c3b72c2d6352",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019004,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T16:17:29.189182"
    },
    "error": null,
    "completed_at": "2025-10-10T16:17:29.189182"
  },
  "84c8f9fb-78be-4501-885c-1ce84336f6fe": {
    "task_id": "84c8f9fb-78be-4501-885c-1ce84336f6fe",
    "status": "completed",
    "created_at": "2025-10-10T16:25:05.510333",
    "started_at": "2025-10-10T16:25:05.510333",
    "result": {
      "success": true,
      "task_id": "84c8f9fb-78be-4501-885c-1ce84336f6fe",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: unused_module  # 未使用的导入",
            "line": 4,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "# import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "# import sys",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": true
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 41,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 49,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 50,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 20,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 62,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 59,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 18,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 15,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "# # # # # # # # # # # # # # # # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.018231,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 安全风险",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "import unused_module  # 未使用的导入",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T16:25:05.576577"
    },
    "error": null,
    "completed_at": "2025-10-10T16:25:05.576577"
  },
  "f8058b0f-5a11-4805-aac1-4cddfea1cca9": {
    "task_id": "f8058b0f-5a11-4805-aac1-4cddfea1cca9",
    "status": "completed",
    "created_at": "2025-10-10T17:08:04.160110",
    "started_at": "2025-10-10T17:08:04.160110",
    "result": {
      "success": true,
      "task_id": "f8058b0f-5a11-4805-aac1-4cddfea1cca9",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 23,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: sys",
            "line": 3,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 1,
                "content": "# test_python_bad.py - 有问题的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 2,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 3,
                "content": "import sys",
                "is_issue_line": true
              },
              {
                "line_number": 4,
                "content": "import ast",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global global_var  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global global_var  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global global_var  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.017999,
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 8,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "unused_import": 1,
          "unhandled_exception": 3,
          "global_variables": 2,
          "unhandled_type_conversion": 2,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 8,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"print('Hello')\"",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T17:08:04.232111"
    },
    "error": null,
    "completed_at": "2025-10-10T17:08:04.232111"
  },
  "62d3d260-6f89-46cd-a561-69f1c788af91": {
    "task_id": "62d3d260-6f89-46cd-a561-69f1c788af91",
    "status": "completed",
    "created_at": "2025-10-10T17:41:51.785146",
    "started_at": "2025-10-10T17:41:51.785146",
    "result": {
      "success": true,
      "task_id": "62d3d260-6f89-46cd-a561-69f1c788af91",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.018566,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T17:41:51.865130"
    },
    "error": null,
    "completed_at": "2025-10-10T17:41:51.865130"
  },
  "f96f37d1-ab69-40b7-ad41-cf31519bc38a": {
    "task_id": "f96f37d1-ab69-40b7-ad41-cf31519bc38a",
    "status": "completed",
    "created_at": "2025-10-10T17:45:37.738537",
    "started_at": "2025-10-10T17:45:37.738537",
    "result": {
      "success": true,
      "task_id": "f96f37d1-ab69-40b7-ad41-cf31519bc38a",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.020018,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T17:45:37.815827"
    },
    "error": null,
    "completed_at": "2025-10-10T17:45:37.815827"
  },
  "75a21aff-29c7-4558-94cc-502e3f86119e": {
    "task_id": "75a21aff-29c7-4558-94cc-502e3f86119e",
    "status": "completed",
    "created_at": "2025-10-10T17:49:30.669992",
    "started_at": "2025-10-10T17:49:30.669992",
    "result": {
      "success": true,
      "task_id": "75a21aff-29c7-4558-94cc-502e3f86119e",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019999000000000003,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T17:49:30.750045"
    },
    "error": null,
    "completed_at": "2025-10-10T17:49:30.750045"
  },
  "2824b447-26d0-4a01-9709-3eb82adc1fca": {
    "task_id": "2824b447-26d0-4a01-9709-3eb82adc1fca",
    "status": "completed",
    "created_at": "2025-10-10T17:51:23.626921",
    "started_at": "2025-10-10T17:51:23.626921",
    "result": {
      "success": true,
      "task_id": "2824b447-26d0-4a01-9709-3eb82adc1fca",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T17:51:23.703616"
    },
    "error": null,
    "completed_at": "2025-10-10T17:51:23.703616"
  },
  "76d4bdb6-9399-4e1e-980f-80f0d45594a9": {
    "task_id": "76d4bdb6-9399-4e1e-980f-80f0d45594a9",
    "status": "completed",
    "created_at": "2025-10-10T17:53:49.091162",
    "started_at": "2025-10-10T17:53:49.091162",
    "result": {
      "success": true,
      "task_id": "76d4bdb6-9399-4e1e-980f-80f0d45594a9",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.020506999999999997,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T17:53:49.173009"
    },
    "error": null,
    "completed_at": "2025-10-10T17:53:49.173009"
  },
  "618f7d8c-560f-43bb-97a3-c8181a5de4b1": {
    "task_id": "618f7d8c-560f-43bb-97a3-c8181a5de4b1",
    "status": "completed",
    "created_at": "2025-10-10T17:54:11.111156",
    "started_at": "2025-10-10T17:54:11.111156",
    "result": {
      "success": true,
      "task_id": "618f7d8c-560f-43bb-97a3-c8181a5de4b1",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.008993000000000001,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T17:54:11.182359"
    },
    "error": null,
    "completed_at": "2025-10-10T17:54:11.182359"
  },
  "693102ca-b57d-4ea1-b975-3f888c3d8acc": {
    "task_id": "693102ca-b57d-4ea1-b975-3f888c3d8acc",
    "status": "completed",
    "created_at": "2025-10-10T18:02:41.309969",
    "started_at": "2025-10-10T18:02:41.309969",
    "result": {
      "success": true,
      "task_id": "693102ca-b57d-4ea1-b975-3f888c3d8acc",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.028411,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T18:02:41.403129"
    },
    "error": null,
    "completed_at": "2025-10-10T18:02:41.403129"
  },
  "382610d2-3e73-463d-8f7f-e92877a970b9": {
    "task_id": "382610d2-3e73-463d-8f7f-e92877a970b9",
    "status": "completed",
    "created_at": "2025-10-10T18:10:30.418127",
    "started_at": "2025-10-10T18:10:30.418127",
    "result": {
      "success": true,
      "task_id": "382610d2-3e73-463d-8f7f-e92877a970b9",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019071,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T18:10:30.505917"
    },
    "error": null,
    "completed_at": "2025-10-10T18:10:30.505917"
  },
  "9e49f7d9-60a4-4e5e-bc9e-4ef942935e4f": {
    "task_id": "9e49f7d9-60a4-4e5e-bc9e-4ef942935e4f",
    "status": "completed",
    "created_at": "2025-10-10T18:17:02.096964",
    "started_at": "2025-10-10T18:17:02.096964",
    "result": {
      "success": true,
      "task_id": "9e49f7d9-60a4-4e5e-bc9e-4ef942935e4f",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019993,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T18:17:02.183377"
    },
    "error": null,
    "completed_at": "2025-10-10T18:17:02.183377"
  },
  "2f378ec6-0927-4909-a3c9-6c6a2b080cbc": {
    "task_id": "2f378ec6-0927-4909-a3c9-6c6a2b080cbc",
    "status": "completed",
    "created_at": "2025-10-10T18:17:54.711577",
    "started_at": "2025-10-10T18:17:54.711577",
    "result": {
      "success": true,
      "task_id": "2f378ec6-0927-4909-a3c9-6c6a2b080cbc",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# # # # # # # # # # # # # # # #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019112,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T18:17:54.811769"
    },
    "error": null,
    "completed_at": "2025-10-10T18:17:54.811769"
  },
  "b437a1aa-5a2a-450c-936f-06a7c6b6e552": {
    "task_id": "b437a1aa-5a2a-450c-936f-06a7c6b6e552",
    "status": "completed",
    "created_at": "2025-10-10T18:25:45.791777",
    "started_at": "2025-10-10T18:25:45.791777",
    "result": {
      "success": true,
      "task_id": "b437a1aa-5a2a-450c-936f-06a7c6b6e552",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global global_var  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global global_var  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global global_var  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.018228,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T18:25:45.880904"
    },
    "error": null,
    "completed_at": "2025-10-10T18:25:45.880904"
  },
  "29209833-d197-4261-a27a-278af57f3db7": {
    "task_id": "29209833-d197-4261-a27a-278af57f3db7",
    "status": "completed",
    "created_at": "2025-10-10T18:28:13.657999",
    "started_at": "2025-10-10T18:28:13.657999",
    "result": {
      "success": true,
      "task_id": "29209833-d197-4261-a27a-278af57f3db7",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global global_var  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global global_var  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    global global_var  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019006999999999996,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T18:28:13.752013"
    },
    "error": null,
    "completed_at": "2025-10-10T18:28:13.752013"
  },
  "4abdc282-020a-4dd0-bba9-ded306c0bbe5": {
    "task_id": "4abdc282-020a-4dd0-bba9-ded306c0bbe5",
    "status": "completed",
    "created_at": "2025-10-10T19:08:24.644729",
    "started_at": "2025-10-10T19:08:24.644729",
    "result": {
      "success": true,
      "task_id": "4abdc282-020a-4dd0-bba9-ded306c0bbe5",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 20,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "global_variables",
            "severity": "warning",
            "message": "使用全局变量",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "全局变量会增加代码的复杂性和测试难度。建议使用函数参数或类属性。",
            "fix_suggestions": [
              "使用函数参数传递数据",
              "使用类属性",
              "使用单例模式"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "        content = f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return content",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 65,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 62,
                "content": "    return big_list",
                "is_issue_line": false
              },
              {
                "line_number": 63,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 64,
                "content": "# 缺少主函数保护",
                "is_issue_line": false
              },
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": true
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    # 缺少文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    x = 1",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    z = x + y",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return z",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 25,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "    # 缺少类型提示和文档字符串",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    # 缺少输入验证",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 32,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 29,
                "content": "    processed = data * 2",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    return processed",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 33,
                "content": "    # 缺少异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "    result = a / b if b != 0 else 0  # 可能除零错误",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "# 全局变量（不好的实践）",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "# #     global global_var  # 建议避免使用全局变量  # 建议避免使用全局变量  # 建议避免使用全局变量",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "    global_var = \"modified\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 47,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "# 不安全的文件操作",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    # 没有异常处理",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "# 内存泄漏风险",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "MAX_ITEMS = 1000  # 定义最大项目数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "def create_large_list():",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    big_list = []",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    for i in range(MAX_ITEMS):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 68,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 65,
                "content": "print(\"This will always execute\")",
                "is_issue_line": false
              },
              {
                "line_number": 66,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 67,
                "content": "# 不安全的字符串格式化",
                "is_issue_line": false
              },
              {
                "line_number": 68,
                "content": "def format_string(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 69,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 70,
                "content": "    query = \"SELECT * FROM users WHERE name = '%s'\" % user_input  # SQL注入风险",
                "is_issue_line": false
              },
              {
                "line_number": 71,
                "content": "    return query",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.009994,
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 7,
          "warning_count": 5,
          "info_count": 8
        },
        "issues_by_type": {
          "hardcoded_secrets": 5,
          "unsafe_eval": 2,
          "global_variables": 2,
          "unhandled_exception": 2,
          "unhandled_type_conversion": 1,
          "missing_parameter_validation": 8
        },
        "issues_by_severity": {
          "error": 7,
          "warning": 5,
          "info": 8
        },
        "recommendations": [
          "发现严重错误，建议优先修复"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 22,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 19,
                "content": "def risky_function():",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    # 不安全的eval使用",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    user_input = \"'Hello'\"  # 改为字符串字面量，literal_eval可以处理",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    result = ast.literal_ast.literal_ast.literal_eval(user_input)  # 修复语法错误",
                "is_issue_line": true
              },
              {
                "line_number": 23,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "def process_user_data(data):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "# import unused_module  # 未使用的导入 - 已注释",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "# 硬编码的API密钥",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "SECRET_PASSWORD = os.getenv(\"SECRET_PASSWORD\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function():",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"TODO: 添加函数文档字符串\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T19:08:24.751857"
    },
    "error": null,
    "completed_at": "2025-10-10T19:08:24.751857"
  },
  "23f7f710-aa1a-4aa5-bc81-5278b3d5c2e3": {
    "task_id": "23f7f710-aa1a-4aa5-bc81-5278b3d5c2e3",
    "status": "completed",
    "created_at": "2025-10-10T19:27:26.327047",
    "started_at": "2025-10-10T19:27:26.327047",
    "result": {
      "success": true,
      "task_id": "23f7f710-aa1a-4aa5-bc81-5278b3d5c2e3",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 36,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "division_by_zero_risk",
            "severity": "warning",
            "message": "可能存在除零风险",
            "line": 26,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    \"\"\"除法函数但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    return a / b",
                "is_issue_line": true
              },
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "# 全局变量使用",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 55,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def create_large_list(size):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 55,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 15,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": true
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"除法函数但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    return a / b",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "# 全局变量使用",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 35,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 32,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 36,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def create_large_list(size):",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 44,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 41,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "def format_string(template, *args):",
                "is_issue_line": true
              },
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 convert_to_int 缺少参数验证",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 123",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.017678,
        "summary": {
          "error_count": 8,
          "warning_count": 18,
          "info_count": 10
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 8,
          "warning_count": 18,
          "info_count": 10
        },
        "issues_by_type": {
          "hardcoded_secrets": 6,
          "unsafe_eval": 2,
          "division_by_zero_risk": 1,
          "unhandled_exception": 9,
          "unhandled_type_conversion": 8,
          "missing_parameter_validation": 9,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 8,
          "warning": 18,
          "info": 10
        },
        "recommendations": [
          "发现严重错误，建议优先修复",
          "警告数量较多，建议进行代码审查"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = \"sk-1234567890abcdef\"",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T19:27:26.428061"
    },
    "error": null,
    "completed_at": "2025-10-10T19:27:26.428061"
  },
  "5c2ec129-6c70-4eed-88f6-d980bb8826c3": {
    "task_id": "5c2ec129-6c70-4eed-88f6-d980bb8826c3",
    "status": "completed",
    "created_at": "2025-10-10T19:32:29.359573",
    "started_at": "2025-10-10T19:32:29.359573",
    "result": {
      "success": true,
      "task_id": "5c2ec129-6c70-4eed-88f6-d980bb8826c3",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 35,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 55,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def create_large_list(size):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 55,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 15,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": true
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"除法函数但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    return a / b if b != 0 else 0",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "# 全局变量使用",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 35,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 32,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 36,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def create_large_list(size):",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 44,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 41,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "def format_string(template, *args):",
                "is_issue_line": true
              },
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 convert_to_int 缺少参数验证",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 123",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.018008999999999997,
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "issues_by_type": {
          "hardcoded_secrets": 6,
          "unsafe_eval": 2,
          "unhandled_exception": 9,
          "unhandled_type_conversion": 8,
          "missing_parameter_validation": 9,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 8,
          "warning": 17,
          "info": 10
        },
        "recommendations": [
          "发现严重错误，建议优先修复",
          "警告数量较多，建议进行代码审查"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T19:32:29.458770"
    },
    "error": null,
    "completed_at": "2025-10-10T19:32:29.458770"
  },
  "1869cb9b-63de-4136-a801-9adafb0b058d": {
    "task_id": "1869cb9b-63de-4136-a801-9adafb0b058d",
    "status": "completed",
    "created_at": "2025-10-10T19:37:11.036003",
    "started_at": "2025-10-10T19:37:11.036003",
    "result": {
      "success": true,
      "task_id": "1869cb9b-63de-4136-a801-9adafb0b058d",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 35,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 55,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def create_large_list(size):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 55,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 15,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": true
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"除法函数但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    return a / b if b != 0 else 0",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "# 全局变量使用",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 35,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 32,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 36,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def create_large_list(size):",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 44,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 41,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "def format_string(template, *args):",
                "is_issue_line": true
              },
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 convert_to_int 缺少参数验证",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 123",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.021093,
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "issues_by_type": {
          "hardcoded_secrets": 6,
          "unsafe_eval": 2,
          "unhandled_exception": 9,
          "unhandled_type_conversion": 8,
          "missing_parameter_validation": 9,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 8,
          "warning": 17,
          "info": 10
        },
        "recommendations": [
          "发现严重错误，建议优先修复",
          "警告数量较多，建议进行代码审查"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T19:37:11.140093"
    },
    "error": null,
    "completed_at": "2025-10-10T19:37:11.140093"
  },
  "33ac8d49-4c6f-4821-b74b-68da584d8b88": {
    "task_id": "33ac8d49-4c6f-4821-b74b-68da584d8b88",
    "status": "completed",
    "created_at": "2025-10-10T19:40:38.937372",
    "started_at": "2025-10-10T19:40:38.937372",
    "result": {
      "success": true,
      "task_id": "33ac8d49-4c6f-4821-b74b-68da584d8b88",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 35,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 55,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def create_large_list(size):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 54,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 55,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 52,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 15,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": true
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 24,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 21,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 25,
                "content": "    \"\"\"除法函数但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "    return a / b if b != 0 else 0",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 31,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 28,
                "content": "# 全局变量使用",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 32,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 35,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 32,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 34,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 36,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 40,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 37,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "def create_large_list(size):",
                "is_issue_line": true
              },
              {
                "line_number": 41,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 44,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 41,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 43,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "def format_string(template, *args):",
                "is_issue_line": true
              },
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 convert_to_int 缺少参数验证",
            "line": 48,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 45,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 49,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 123",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.020925,
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "issues_by_type": {
          "hardcoded_secrets": 6,
          "unsafe_eval": 2,
          "unhandled_exception": 9,
          "unhandled_type_conversion": 8,
          "missing_parameter_validation": 9,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 8,
          "warning": 17,
          "info": 10
        },
        "recommendations": [
          "发现严重错误，建议优先修复",
          "警告数量较多，建议进行代码审查"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 8,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 7,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T19:40:39.046372"
    },
    "error": null,
    "completed_at": "2025-10-10T19:40:39.046372"
  },
  "b59e365d-b016-48e7-baea-606531cbeaae": {
    "task_id": "b59e365d-b016-48e7-baea-606531cbeaae",
    "status": "completed",
    "created_at": "2025-10-10T19:47:57.397447",
    "started_at": "2025-10-10T19:47:57.397447",
    "result": {
      "success": true,
      "task_id": "b59e365d-b016-48e7-baea-606531cbeaae",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 35,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 52,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def create_large_list(size):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 52,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 13,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": true
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 26,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 23,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 27,
                "content": "    \"\"\"除法函数但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    return a / b if b != 0 else 0",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 33,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 30,
                "content": "# 全局变量使用",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 34,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def create_large_list(size):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def format_string(template, *args):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 convert_to_int 缺少参数验证",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 123",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.025417000000000002,
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "issues_by_type": {
          "hardcoded_secrets": 6,
          "unsafe_eval": 2,
          "unhandled_exception": 9,
          "unhandled_type_conversion": 8,
          "missing_parameter_validation": 9,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 8,
          "warning": 17,
          "info": 10
        },
        "recommendations": [
          "发现严重错误，建议优先修复",
          "警告数量较多，建议进行代码审查"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T19:47:57.511612"
    },
    "error": null,
    "completed_at": "2025-10-10T19:47:57.511612"
  },
  "01384f42-1d99-4b7e-885e-6d5bb784d8c1": {
    "task_id": "01384f42-1d99-4b7e-885e-6d5bb784d8c1",
    "status": "completed",
    "created_at": "2025-10-10T20:15:24.078041",
    "started_at": "2025-10-10T20:15:24.078041",
    "result": {
      "success": true,
      "task_id": "01384f42-1d99-4b7e-885e-6d5bb784d8c1",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 35,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 52,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def create_large_list(size):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 52,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 13,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": true
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 26,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 23,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 27,
                "content": "    \"\"\"除法函数但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    return a / b if b != 0 else 0",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 33,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 30,
                "content": "# 全局变量使用",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 34,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def create_large_list(size):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def format_string(template, *args):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 convert_to_int 缺少参数验证",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 123",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.020176,
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "issues_by_type": {
          "hardcoded_secrets": 6,
          "unsafe_eval": 2,
          "unhandled_exception": 9,
          "unhandled_type_conversion": 8,
          "missing_parameter_validation": 9,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 8,
          "warning": 17,
          "info": 10
        },
        "recommendations": [
          "发现严重错误，建议优先修复",
          "警告数量较多，建议进行代码审查"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T20:15:24.194494"
    },
    "error": null,
    "completed_at": "2025-10-10T20:15:24.194494"
  },
  "2e2a4002-8112-47a0-9691-e39fbbb35b27": {
    "task_id": "2e2a4002-8112-47a0-9691-e39fbbb35b27",
    "status": "completed",
    "created_at": "2025-10-10T20:39:12.780170",
    "started_at": "2025-10-10T20:39:12.780170",
    "result": {
      "success": true,
      "task_id": "2e2a4002-8112-47a0-9691-e39fbbb35b27",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 35,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 52,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def create_large_list(size):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 52,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 13,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": true
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 26,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 23,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 27,
                "content": "    \"\"\"除法函数但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    return a / b if b != 0 else 0",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 33,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 30,
                "content": "# 全局变量使用",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 34,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def create_large_list(size):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def format_string(template, *args):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 convert_to_int 缺少参数验证",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 123",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.017716,
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "issues_by_type": {
          "hardcoded_secrets": 6,
          "unsafe_eval": 2,
          "unhandled_exception": 9,
          "unhandled_type_conversion": 8,
          "missing_parameter_validation": 9,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 8,
          "warning": 17,
          "info": 10
        },
        "recommendations": [
          "发现严重错误，建议优先修复",
          "警告数量较多，建议进行代码审查"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T20:39:12.894250"
    },
    "error": null,
    "completed_at": "2025-10-10T20:39:12.894250"
  },
  "bde63e6e-3a1d-450e-860a-88322618e912": {
    "task_id": "bde63e6e-3a1d-450e-860a-88322618e912",
    "status": "completed",
    "created_at": "2025-10-10T20:59:05.163923",
    "started_at": "2025-10-10T20:59:05.163923",
    "result": {
      "success": true,
      "task_id": "bde63e6e-3a1d-450e-860a-88322618e912",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 35,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 52,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def create_large_list(size):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 52,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 13,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": true
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 26,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 23,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 27,
                "content": "    \"\"\"除法函数但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    return a / b if b != 0 else 0",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 33,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 30,
                "content": "# 全局变量使用",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 34,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def create_large_list(size):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def format_string(template, *args):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 convert_to_int 缺少参数验证",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 123",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.022216,
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "issues_by_type": {
          "hardcoded_secrets": 6,
          "unsafe_eval": 2,
          "unhandled_exception": 9,
          "unhandled_type_conversion": 8,
          "missing_parameter_validation": 9,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 8,
          "warning": 17,
          "info": 10
        },
        "recommendations": [
          "发现严重错误，建议优先修复",
          "警告数量较多，建议进行代码审查"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T20:59:05.286198"
    },
    "error": null,
    "completed_at": "2025-10-10T20:59:05.286198"
  },
  "b018edfc-9155-4d49-99c5-359389e6e64d": {
    "task_id": "b018edfc-9155-4d49-99c5-359389e6e64d",
    "status": "completed",
    "created_at": "2025-10-10T21:06:43.990192",
    "started_at": "2025-10-10T21:06:43.990192",
    "result": {
      "success": true,
      "task_id": "b018edfc-9155-4d49-99c5-359389e6e64d",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
        "language": "python",
        "total_issues": 35,
        "issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的SECRET",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的PASSWORD",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 52,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "文件操作未处理异常",
            "line": 39,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def read_file(filename):",
                "is_issue_line": false
              },
              {
                "line_number": 38,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": true
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def create_large_list(size):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 52,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": true
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 56,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": true
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 57,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 58,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "    # 测试各种函数",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 59,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 56,
                "content": "    print(bad_function(5))",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": true
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 60,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 57,
                "content": "    print(risky_function(\"2 + 2\"))",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": true
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unhandled_type_conversion",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 bad_function 缺少参数验证",
            "line": 13,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": true
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 risky_function 缺少参数验证",
            "line": 17,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "    return x * 2",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": true
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_user_data 缺少参数验证",
            "line": 21,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": false
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": true
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    return result",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 divide_numbers 缺少参数验证",
            "line": 26,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 23,
                "content": "    result = risky_function(user_input)",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    return result",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "def divide_numbers(a, b):",
                "is_issue_line": true
              },
              {
                "line_number": 27,
                "content": "    \"\"\"除法函数但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    return a / b if b != 0 else 0",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 use_global 缺少参数验证",
            "line": 33,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 30,
                "content": "# 全局变量使用",
                "is_issue_line": false
              },
              {
                "line_number": 31,
                "content": "global_var = \"I'm global\"",
                "is_issue_line": false
              },
              {
                "line_number": 32,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 33,
                "content": "def use_global():",
                "is_issue_line": true
              },
              {
                "line_number": 34,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 read_file 缺少参数验证",
            "line": 37,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 34,
                "content": "    \"\"\"使用全局变量\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 35,
                "content": "    return global_var",
                "is_issue_line": false
              },
              {
                "line_number": 36,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 37,
                "content": "def read_file(filename):",
                "is_issue_line": true
              },
              {
                "line_number": 38,
                "content": "    \"\"\"文件读取但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 create_large_list 缺少参数验证",
            "line": 42,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 39,
                "content": "    with open(filename, 'r') as f:",
                "is_issue_line": false
              },
              {
                "line_number": 40,
                "content": "        return f.read()",
                "is_issue_line": false
              },
              {
                "line_number": 41,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 42,
                "content": "def create_large_list(size):",
                "is_issue_line": true
              },
              {
                "line_number": 43,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 format_string 缺少参数验证",
            "line": 46,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 43,
                "content": "    \"\"\"创建大列表但缺少参数验证\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 44,
                "content": "    return [i for i in range(size)]",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "def format_string(template, *args):",
                "is_issue_line": true
              },
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 convert_to_int 缺少参数验证",
            "line": 50,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 47,
                "content": "    \"\"\"字符串格式化但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 48,
                "content": "    return template.format(*args)",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "def convert_to_int(value):",
                "is_issue_line": true
              },
              {
                "line_number": 51,
                "content": "    \"\"\"类型转换但缺少异常处理\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    return int(value)",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 123",
            "line": 61,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 58,
                "content": "    print(divide_numbers(10, 2))",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "    print(use_global())",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "    print(format_string(\"Hello {}\", \"World\"))",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "    print(convert_to_int(\"123\"))",
                "is_issue_line": true
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.019327,
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 8,
          "warning_count": 17,
          "info_count": 10
        },
        "issues_by_type": {
          "hardcoded_secrets": 6,
          "unsafe_eval": 2,
          "unhandled_exception": 9,
          "unhandled_type_conversion": 8,
          "missing_parameter_validation": 9,
          "magic_number": 1
        },
        "issues_by_severity": {
          "error": 8,
          "warning": 17,
          "info": 10
        },
        "recommendations": [
          "发现严重错误，建议优先修复",
          "警告数量较多，建议进行代码审查"
        ],
        "priority_issues": [
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 10,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": true
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的密钥或密码",
            "line": 11,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": true
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "def bad_function(x):",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "    \"\"\"缺少参数验证的函数\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "unsafe_eval",
            "severity": "error",
            "message": "不安全的eval使用",
            "line": 19,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 16,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "def risky_function(data):",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    \"\"\"使用不安全的eval函数\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 19,
                "content": "    return eval(data)",
                "is_issue_line": true
              },
              {
                "line_number": 20,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 21,
                "content": "def process_user_data(user_input):",
                "is_issue_line": false
              },
              {
                "line_number": 22,
                "content": "    \"\"\"处理用户输入但缺少验证\"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "使用eval()函数执行用户输入存在代码注入风险，可能导致系统被攻击。建议使用更安全的方法。",
            "fix_suggestions": [
              "使用ast.literal_eval()替代eval()",
              "使用json.loads()解析JSON数据",
              "使用专门的解析库"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          },
          {
            "type": "hardcoded_secrets",
            "severity": "error",
            "message": "发现硬编码的API_KEY",
            "line": 9,
            "file": "test_python_bad.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "# 硬编码的敏感信息",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "API_KEY = os.getenv(\"API_KEY\", \"\")",
                "is_issue_line": true
              },
              {
                "line_number": 10,
                "content": "SECRET = \"my_secret_password\"",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "PASSWORD = \"admin123\"",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "硬编码的密钥、密码或API密钥存在安全风险，可能被恶意用户获取。建议使用环境变量或配置文件。",
            "fix_suggestions": [
              "使用环境变量存储敏感信息",
              "使用配置文件（不提交到版本控制）",
              "使用密钥管理服务"
            ],
            "severity_info": {
              "level": 1,
              "name": "错误",
              "color": "#ff4444"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_bad.py",
            "enhanced": true
          }
        ]
      },
      "timestamp": "2025-10-10T21:06:44.113931"
    },
    "error": null,
    "completed_at": "2025-10-10T21:06:44.113931"
  },
  "7a727aa3-2477-4791-8001-60c1623cc212": {
    "task_id": "7a727aa3-2477-4791-8001-60c1623cc212",
    "status": "completed",
    "created_at": "2025-10-10T21:07:36.038971",
    "started_at": "2025-10-10T21:07:36.038971",
    "result": {
      "success": true,
      "task_id": "7a727aa3-2477-4791-8001-60c1623cc212",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
        "language": "python",
        "total_issues": 17,
        "issues": [
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: os",
            "line": 6,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 3,
                "content": "这是一个良好的Python代码示例",
                "is_issue_line": false
              },
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": true
              },
              {
                "line_number": 7,
                "content": "import sys",
                "is_issue_line": false
              },
              {
                "line_number": 8,
                "content": "from typing import List, Dict, Any",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "from datetime import datetime",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "unused_import",
            "severity": "warning",
            "message": "可能未使用的导入: sys",
            "line": 7,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 4,
                "content": "\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 5,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 6,
                "content": "import os",
                "is_issue_line": false
              },
              {
                "line_number": 7,
                "content": "import sys",
                "is_issue_line": true
              },
              {
                "line_number": 8,
                "content": "from typing import List, Dict, Any",
                "is_issue_line": false
              },
              {
                "line_number": 9,
                "content": "from datetime import datetime",
                "is_issue_line": false
              },
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "未使用的导入语句会占用内存空间并可能影响代码的可读性。建议删除未使用的导入。",
            "fix_suggestions": [
              "删除未使用的导入语句",
              "检查是否有其他文件需要这个导入",
              "使用IDE的自动清理功能"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 47,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "        return result > 0",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "        ",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    except Exception as e:",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "        print(f\"处理数据时出错: {e}\")",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "        return False",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "class DataProcessor:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 92,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 89,
                "content": "    # 测试代码",
                "is_issue_line": false
              },
              {
                "line_number": 90,
                "content": "    numbers = [1, 2, 3, 4, 5]",
                "is_issue_line": false
              },
              {
                "line_number": 91,
                "content": "    total = calculate_sum(numbers)",
                "is_issue_line": false
              },
              {
                "line_number": 92,
                "content": "    print(f\"总和: {total}\")",
                "is_issue_line": true
              },
              {
                "line_number": 93,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 94,
                "content": "    processor = DataProcessor({'timeout': DEFAULT_TIMEOUT})",
                "is_issue_line": false
              },
              {
                "line_number": 95,
                "content": "    test_data = [{'id': 1, 'value': 10}, {'id': 2, 'value': 20}]",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 97,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 94,
                "content": "    processor = DataProcessor({'timeout': DEFAULT_TIMEOUT})",
                "is_issue_line": false
              },
              {
                "line_number": 95,
                "content": "    test_data = [{'id': 1, 'value': 10}, {'id': 2, 'value': 20}]",
                "is_issue_line": false
              },
              {
                "line_number": 96,
                "content": "    results = processor.process(test_data)",
                "is_issue_line": false
              },
              {
                "line_number": 97,
                "content": "    print(f\"处理结果: {results}\")",
                "is_issue_line": true
              },
              {
                "line_number": 98,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 99,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "empty_list_handling",
            "severity": "warning",
            "message": "未处理空列表情况",
            "line": 15,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 12,
                "content": "MAX_RETRIES = 3",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "DEFAULT_TIMEOUT = 30",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def calculate_sum(numbers: List[int]) -> int:",
                "is_issue_line": true
              },
              {
                "line_number": 16,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    计算数字列表的总和",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "empty_list_handling",
            "severity": "warning",
            "message": "未处理空列表情况",
            "line": 25,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    Returns:",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "        总和",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    return sum(numbers)",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "def process_data(data: Dict[str, Any]) -> bool:",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    \"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "empty_list_handling",
            "severity": "warning",
            "message": "未处理空列表情况",
            "line": 91,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 88,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 89,
                "content": "    # 测试代码",
                "is_issue_line": false
              },
              {
                "line_number": 90,
                "content": "    numbers = [1, 2, 3, 4, 5]",
                "is_issue_line": false
              },
              {
                "line_number": 91,
                "content": "    total = calculate_sum(numbers)",
                "is_issue_line": true
              },
              {
                "line_number": 92,
                "content": "    print(f\"总和: {total}\")",
                "is_issue_line": false
              },
              {
                "line_number": 93,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 94,
                "content": "    processor = DataProcessor({'timeout': DEFAULT_TIMEOUT})",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "long_function",
            "severity": "warning",
            "message": "函数过长 (22 行)",
            "line": 27,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 24,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    return sum(numbers)",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "def process_data(data: Dict[str, Any]) -> bool:",
                "is_issue_line": true
              },
              {
                "line_number": 28,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    处理数据",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 calculate_sum 缺少参数验证",
            "line": 15,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 12,
                "content": "MAX_RETRIES = 3",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "DEFAULT_TIMEOUT = 30",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def calculate_sum(numbers: List[int]) -> int:",
                "is_issue_line": true
              },
              {
                "line_number": 16,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    计算数字列表的总和",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_data 缺少参数验证",
            "line": 27,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 24,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    return sum(numbers)",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "def process_data(data: Dict[str, Any]) -> bool:",
                "is_issue_line": true
              },
              {
                "line_number": 28,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    处理数据",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process 缺少参数验证",
            "line": 57,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 54,
                "content": "        self.config = config",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "        self.processed_count = 0",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    def process(self, data: List[Dict]) -> List[Dict]:",
                "is_issue_line": true
              },
              {
                "line_number": 58,
                "content": "        \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 59,
                "content": "        批量处理数据",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "        ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 _validate_item 缺少参数验证",
            "line": 76,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 73,
                "content": "        ",
                "is_issue_line": false
              },
              {
                "line_number": 74,
                "content": "        return results",
                "is_issue_line": false
              },
              {
                "line_number": 75,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 76,
                "content": "    def _validate_item(self, item: Dict) -> bool:",
                "is_issue_line": true
              },
              {
                "line_number": 77,
                "content": "        \"\"\"验证单个数据项\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 78,
                "content": "        return item is not None and isinstance(item, dict)",
                "is_issue_line": false
              },
              {
                "line_number": 79,
                "content": "    ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 _process_item 缺少参数验证",
            "line": 80,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 77,
                "content": "        \"\"\"验证单个数据项\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 78,
                "content": "        return item is not None and isinstance(item, dict)",
                "is_issue_line": false
              },
              {
                "line_number": 79,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 80,
                "content": "    def _process_item(self, item: Dict) -> Dict:",
                "is_issue_line": true
              },
              {
                "line_number": 81,
                "content": "        \"\"\"处理单个数据项\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 82,
                "content": "        return {",
                "is_issue_line": false
              },
              {
                "line_number": 83,
                "content": "            'id': item.get('id'),",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "missing_docstring",
            "severity": "info",
            "message": "函数缺少文档字符串",
            "line": 53,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 50,
                "content": "class DataProcessor:",
                "is_issue_line": false
              },
              {
                "line_number": 51,
                "content": "    \"\"\"数据处理器类\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 52,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 53,
                "content": "    def __init__(self, config: Dict[str, Any]):",
                "is_issue_line": true
              },
              {
                "line_number": 54,
                "content": "        self.config = config",
                "is_issue_line": false
              },
              {
                "line_number": 55,
                "content": "        self.processed_count = 0",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "    ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 30",
            "line": 13,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "# 常量定义",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "MAX_RETRIES = 3",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "DEFAULT_TIMEOUT = 30",
                "is_issue_line": true
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def calculate_sum(numbers: List[int]) -> int:",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 20",
            "line": 95,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 92,
                "content": "    print(f\"总和: {total}\")",
                "is_issue_line": false
              },
              {
                "line_number": 93,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 94,
                "content": "    processor = DataProcessor({'timeout': DEFAULT_TIMEOUT})",
                "is_issue_line": false
              },
              {
                "line_number": 95,
                "content": "    test_data = [{'id': 1, 'value': 10}, {'id': 2, 'value': 20}]",
                "is_issue_line": true
              },
              {
                "line_number": 96,
                "content": "    results = processor.process(test_data)",
                "is_issue_line": false
              },
              {
                "line_number": 97,
                "content": "    print(f\"处理结果: {results}\")",
                "is_issue_line": false
              },
              {
                "line_number": 98,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.018673,
        "summary": {
          "error_count": 0,
          "warning_count": 9,
          "info_count": 8
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 0,
          "warning_count": 9,
          "info_count": 8
        },
        "issues_by_type": {
          "unused_import": 2,
          "unhandled_exception": 3,
          "empty_list_handling": 3,
          "long_function": 1,
          "missing_parameter_validation": 5,
          "missing_docstring": 1,
          "magic_number": 2
        },
        "issues_by_severity": {
          "error": 0,
          "warning": 9,
          "info": 8
        },
        "recommendations": [],
        "priority_issues": []
      },
      "timestamp": "2025-10-10T21:07:36.180719"
    },
    "error": null,
    "completed_at": "2025-10-10T21:07:36.180719"
  },
  "b666fb13-074d-4bed-9fa4-d921686c56a4": {
    "task_id": "b666fb13-074d-4bed-9fa4-d921686c56a4",
    "status": "completed",
    "created_at": "2025-10-10T21:12:27.247154",
    "started_at": "2025-10-10T21:12:27.247154",
    "result": {
      "success": true,
      "task_id": "b666fb13-074d-4bed-9fa4-d921686c56a4",
      "detection_results": {
        "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
        "language": "python",
        "total_issues": 14,
        "issues": [
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 47,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 44,
                "content": "        return result > 0",
                "is_issue_line": false
              },
              {
                "line_number": 45,
                "content": "        ",
                "is_issue_line": false
              },
              {
                "line_number": 46,
                "content": "    except Exception as e:",
                "is_issue_line": false
              },
              {
                "line_number": 47,
                "content": "        print(f\"处理数据时出错: {e}\")",
                "is_issue_line": true
              },
              {
                "line_number": 48,
                "content": "        return False",
                "is_issue_line": false
              },
              {
                "line_number": 49,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 50,
                "content": "class DataProcessor:",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 93,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 90,
                "content": "    # 测试代码",
                "is_issue_line": false
              },
              {
                "line_number": 91,
                "content": "    numbers = [1, 2, 3, 4, 5]",
                "is_issue_line": false
              },
              {
                "line_number": 92,
                "content": "    total = calculate_sum(numbers)",
                "is_issue_line": false
              },
              {
                "line_number": 93,
                "content": "    print(f\"总和: {total}\")",
                "is_issue_line": true
              },
              {
                "line_number": 94,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 95,
                "content": "    processor = DataProcessor({'timeout': DEFAULT_TIMEOUT})",
                "is_issue_line": false
              },
              {
                "line_number": 96,
                "content": "    test_data = [{'id': 1, 'value': 10}, {'id': 2, 'value': 20}]",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "unhandled_exception",
            "severity": "warning",
            "message": "类型转换未处理异常",
            "line": 98,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 95,
                "content": "    processor = DataProcessor({'timeout': DEFAULT_TIMEOUT})",
                "is_issue_line": false
              },
              {
                "line_number": 96,
                "content": "    test_data = [{'id': 1, 'value': 10}, {'id': 2, 'value': 20}]",
                "is_issue_line": false
              },
              {
                "line_number": 97,
                "content": "    results = processor.process(test_data)",
                "is_issue_line": false
              },
              {
                "line_number": 98,
                "content": "    print(f\"处理结果: {results}\")",
                "is_issue_line": true
              },
              {
                "line_number": 99,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 100,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "empty_list_handling",
            "severity": "warning",
            "message": "未处理空列表情况",
            "line": 15,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 12,
                "content": "MAX_RETRIES = 3",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "DEFAULT_TIMEOUT = 30",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def calculate_sum(numbers: List[int]) -> int:",
                "is_issue_line": true
              },
              {
                "line_number": 16,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    计算数字列表的总和",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "empty_list_handling",
            "severity": "warning",
            "message": "未处理空列表情况",
            "line": 25,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 22,
                "content": "    Returns:",
                "is_issue_line": false
              },
              {
                "line_number": 23,
                "content": "        总和",
                "is_issue_line": false
              },
              {
                "line_number": 24,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    return sum(numbers)",
                "is_issue_line": true
              },
              {
                "line_number": 26,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "def process_data(data: Dict[str, Any]) -> bool:",
                "is_issue_line": false
              },
              {
                "line_number": 28,
                "content": "    \"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "empty_list_handling",
            "severity": "warning",
            "message": "未处理空列表情况",
            "line": 92,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 89,
                "content": "if __name__ == \"__main__\":",
                "is_issue_line": false
              },
              {
                "line_number": 90,
                "content": "    # 测试代码",
                "is_issue_line": false
              },
              {
                "line_number": 91,
                "content": "    numbers = [1, 2, 3, 4, 5]",
                "is_issue_line": false
              },
              {
                "line_number": 92,
                "content": "    total = calculate_sum(numbers)",
                "is_issue_line": true
              },
              {
                "line_number": 93,
                "content": "    print(f\"总和: {total}\")",
                "is_issue_line": false
              },
              {
                "line_number": 94,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 95,
                "content": "    processor = DataProcessor({'timeout': DEFAULT_TIMEOUT})",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "long_function",
            "severity": "warning",
            "message": "函数过长 (22 行)",
            "line": 27,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 24,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    return sum(numbers)",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "def process_data(data: Dict[str, Any]) -> bool:",
                "is_issue_line": true
              },
              {
                "line_number": 28,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    处理数据",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 2,
              "name": "警告",
              "color": "#ff8800"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 calculate_sum 缺少参数验证",
            "line": 15,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 12,
                "content": "MAX_RETRIES = 3",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "DEFAULT_TIMEOUT = 30",
                "is_issue_line": false
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def calculate_sum(numbers: List[int]) -> int:",
                "is_issue_line": true
              },
              {
                "line_number": 16,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 17,
                "content": "    计算数字列表的总和",
                "is_issue_line": false
              },
              {
                "line_number": 18,
                "content": "    ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process_data 缺少参数验证",
            "line": 27,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 24,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 25,
                "content": "    return sum(numbers)",
                "is_issue_line": false
              },
              {
                "line_number": 26,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 27,
                "content": "def process_data(data: Dict[str, Any]) -> bool:",
                "is_issue_line": true
              },
              {
                "line_number": 28,
                "content": "    \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 29,
                "content": "    处理数据",
                "is_issue_line": false
              },
              {
                "line_number": 30,
                "content": "    ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 process 缺少参数验证",
            "line": 58,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 55,
                "content": "        self.config = config",
                "is_issue_line": false
              },
              {
                "line_number": 56,
                "content": "        self.processed_count = 0",
                "is_issue_line": false
              },
              {
                "line_number": 57,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 58,
                "content": "    def process(self, data: List[Dict]) -> List[Dict]:",
                "is_issue_line": true
              },
              {
                "line_number": 59,
                "content": "        \"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 60,
                "content": "        批量处理数据",
                "is_issue_line": false
              },
              {
                "line_number": 61,
                "content": "        ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 _validate_item 缺少参数验证",
            "line": 77,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 74,
                "content": "        ",
                "is_issue_line": false
              },
              {
                "line_number": 75,
                "content": "        return results",
                "is_issue_line": false
              },
              {
                "line_number": 76,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 77,
                "content": "    def _validate_item(self, item: Dict) -> bool:",
                "is_issue_line": true
              },
              {
                "line_number": 78,
                "content": "        \"\"\"验证单个数据项\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 79,
                "content": "        return item is not None and isinstance(item, dict)",
                "is_issue_line": false
              },
              {
                "line_number": 80,
                "content": "    ",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "missing_parameter_validation",
            "severity": "info",
            "message": "函数 _process_item 缺少参数验证",
            "line": 81,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 78,
                "content": "        \"\"\"验证单个数据项\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 79,
                "content": "        return item is not None and isinstance(item, dict)",
                "is_issue_line": false
              },
              {
                "line_number": 80,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 81,
                "content": "    def _process_item(self, item: Dict) -> Dict:",
                "is_issue_line": true
              },
              {
                "line_number": 82,
                "content": "        \"\"\"处理单个数据项\"\"\"",
                "is_issue_line": false
              },
              {
                "line_number": 83,
                "content": "        return {",
                "is_issue_line": false
              },
              {
                "line_number": 84,
                "content": "            'id': item.get('id'),",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 30",
            "line": 13,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 10,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 11,
                "content": "# 常量定义",
                "is_issue_line": false
              },
              {
                "line_number": 12,
                "content": "MAX_RETRIES = 3",
                "is_issue_line": false
              },
              {
                "line_number": 13,
                "content": "DEFAULT_TIMEOUT = 30",
                "is_issue_line": true
              },
              {
                "line_number": 14,
                "content": "",
                "is_issue_line": false
              },
              {
                "line_number": 15,
                "content": "def calculate_sum(numbers: List[int]) -> int:",
                "is_issue_line": false
              },
              {
                "line_number": 16,
                "content": "    \"\"\"",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          },
          {
            "type": "magic_number",
            "severity": "info",
            "message": "魔法数字: 20",
            "line": 96,
            "file": "test_python_good.py",
            "language": "python",
            "column": 0,
            "code_snippet": [
              {
                "line_number": 93,
                "content": "    print(f\"总和: {total}\")",
                "is_issue_line": false
              },
              {
                "line_number": 94,
                "content": "    ",
                "is_issue_line": false
              },
              {
                "line_number": 95,
                "content": "    processor = DataProcessor({'timeout': DEFAULT_TIMEOUT})",
                "is_issue_line": false
              },
              {
                "line_number": 96,
                "content": "    test_data = [{'id': 1, 'value': 10}, {'id': 2, 'value': 20}]",
                "is_issue_line": true
              },
              {
                "line_number": 97,
                "content": "    results = processor.process(test_data)",
                "is_issue_line": false
              },
              {
                "line_number": 98,
                "content": "    print(f\"处理结果: {results}\")",
                "is_issue_line": false
              },
              {
                "line_number": 99,
                "content": "",
                "is_issue_line": false
              }
            ],
            "detailed_description": "这是一个代码质量问题，建议进行相应的修复。",
            "fix_suggestions": [
              "建议根据具体情况进行修复"
            ],
            "severity_info": {
              "level": 3,
              "name": "信息",
              "color": "#4488ff"
            },
            "file_path": "C:\\Users\\Ding\\Desktop\\软件体系\\codeagent\\CodeAgent\\tests\\test_python_good.py",
            "enhanced": true
          }
        ],
        "detection_tools": [
          "custom_analyzer"
        ],
        "analysis_time": 0.022837999999999997,
        "summary": {
          "error_count": 0,
          "warning_count": 7,
          "info_count": 7
        },
        "enhanced": true
      },
      "report": {
        "summary": {
          "error_count": 0,
          "warning_count": 7,
          "info_count": 7
        },
        "issues_by_type": {
          "unhandled_exception": 3,
          "empty_list_handling": 3,
          "long_function": 1,
          "missing_parameter_validation": 5,
          "magic_number": 2
        },
        "issues_by_severity": {
          "error": 0,
          "warning": 7,
          "info": 7
        },
        "recommendations": [],
        "priority_issues": []
      },
      "timestamp": "2025-10-10T21:12:27.392194"
    },
    "error": null,
    "completed_at": "2025-10-10T21:12:27.392194"
  }
}