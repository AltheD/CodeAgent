You are an expert Python code refactoring assistant.
Your task is to fix all issues listed below without changing functionality.
请基于以下py完整文件内容，修复下述所有问题：

===== 源代码 BEGIN =====
# test_python_bad.py - 有问题的Python代码示例
import os
import sys
import unused_module  # 未使用的导入

# 硬编码的API密钥
API_KEY = "sk-1234567890abcdef"
SECRET_PASSWORD = "admin123"

def bad_function():
    # 缺少文档字符串
    x = 1
    y = 2
    z = x + y
    return z

def unsafe_eval():
    # 不安全的eval使用
    user_input = "print('Hello')"
    result = eval(user_input)  # 安全风险
    return result

def process_user_data(data):
    # 缺少类型提示和文档字符串
    # 缺少输入验证
    processed = data.upper()
    return processed

def divide_numbers(a, b):
    # 缺少异常处理
    result = a / b  # 可能除零错误
    return result

# 全局变量
global_var = "global"

def use_global():
    global global_var
    global_var = "modified"
    return global_var

# 不安全的文件操作
def read_file(filename):
    # 没有异常处理
    with open(filename, 'r') as f:
        content = f.read()
    return content

# 内存泄漏风险
def create_large_list():
    big_list = []
    for i in range(1000000):
        big_list.append(f"item_{i}")
    return big_list

# 不安全的字符串格式化
def format_string(user_input):
    query = "SELECT * FROM users WHERE name = '%s'" % user_input  # SQL注入风险
    return query

# 未处理的异常
def risky_operation():
    data = {"key": "value"}
    return data["nonexistent_key"]  # KeyError

# 死代码
def unreachable_code():
    return "reached"
    print("This will never execute")  # 死代码

# 类定义问题
class BadClass:
    def __init__(self):
        self.value = None
    
    def method_without_docstring(self):
        return self.value

# 主程序
if __name__ == "__main__":
    # 直接执行可能有问题的代码
    result = divide_numbers(10, 0)  # 除零错误
    print(result)
===== 源代码 END =====

===== 问题列表 BEGIN =====
1. line=7, type=hardcoded_secrets, message=发现硬编码的密钥或密码
2. line=8, type=hardcoded_secrets, message=发现硬编码的密钥或密码
3. line=17, type=unsafe_eval, message=不安全的eval使用
4. line=20, type=unsafe_eval, message=不安全的eval使用
5. line=7, type=hardcoded_secrets, message=发现硬编码的API_KEY
6. line=8, type=hardcoded_secrets, message=发现硬编码的SECRET
7. line=8, type=hardcoded_secrets, message=发现硬编码的PASSWORD
8. line=17, type=unsafe_eval, message=不安全的eval使用
9. line=20, type=unsafe_eval, message=不安全的eval使用
10. line=2, type=unused_import, message=可能未使用的导入: os
11. line=3, type=unused_import, message=可能未使用的导入: sys
12. line=4, type=unused_import, message=可能未使用的导入: unused_module  # 未使用的导入
13. line=19, type=unhandled_exception, message=类型转换未处理异常
14. line=31, type=division_by_zero_risk, message=可能存在除零风险
15. line=38, type=global_variables, message=使用全局变量
16. line=69, type=unhandled_exception, message=类型转换未处理异常
17. line=83, type=unhandled_exception, message=类型转换未处理异常
18. line=38, type=global_variables, message=使用全局变量
19. line=45, type=unhandled_exception, message=文件操作未处理异常
20. line=19, type=unhandled_type_conversion, message=类型转换未处理异常
21. line=69, type=unhandled_type_conversion, message=类型转换未处理异常
22. line=83, type=unhandled_type_conversion, message=类型转换未处理异常
23. line=10, type=missing_parameter_validation, message=函数 bad_function 缺少参数验证
24. line=17, type=missing_parameter_validation, message=函数 unsafe_eval 缺少参数验证
25. line=23, type=missing_parameter_validation, message=函数 process_user_data 缺少参数验证
26. line=29, type=missing_parameter_validation, message=函数 divide_numbers 缺少参数验证
27. line=37, type=missing_parameter_validation, message=函数 use_global 缺少参数验证
28. line=43, type=missing_parameter_validation, message=函数 read_file 缺少参数验证
29. line=50, type=missing_parameter_validation, message=函数 create_large_list 缺少参数验证
30. line=57, type=missing_parameter_validation, message=函数 format_string 缺少参数验证
31. line=62, type=missing_parameter_validation, message=函数 risky_operation 缺少参数验证
32. line=67, type=missing_parameter_validation, message=函数 unreachable_code 缺少参数验证
33. line=76, type=missing_parameter_validation, message=函数 method_without_docstring 缺少参数验证
34. line=10, type=missing_docstring, message=函数缺少文档字符串
35. line=23, type=missing_docstring, message=函数缺少文档字符串
36. line=37, type=missing_docstring, message=函数缺少文档字符串
37. line=43, type=missing_docstring, message=函数缺少文档字符串
38. line=50, type=missing_docstring, message=函数缺少文档字符串
39. line=57, type=missing_docstring, message=函数缺少文档字符串
40. line=62, type=missing_docstring, message=函数缺少文档字符串
41. line=67, type=missing_docstring, message=函数缺少文档字符串
42. line=73, type=missing_docstring, message=函数缺少文档字符串
43. line=52, type=magic_number, message=魔法数字: 1000000
===== 问题列表 END =====

要求：
1) 保持原有功能不变；
2) 一次性修复所有问题；
3) 只输出修复后的完整代码，不要任何解释、注释或 markdown。
